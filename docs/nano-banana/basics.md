# 3.1.2: Понимание основ

- **Время на выполнение:** 15 минут
- **Необходимые знания:** API ключ настроен (Модуль 3.1.1)

> **Начните этот модуль в Claude Code:** Выполните `/start-3-1-2` для запуска интерактивного обучения.

## Обзор

Модуль 3.1.2 обучает механике генерации изображений - как работает система и что вы можете контролировать. Вы поймёте функцию `generate()`, узнаете о соотношениях сторон и разрешении и освоите искусство итерации.

**Ключевой вывод:** Вам не нужно запоминать параметры или писать код. Описывайте, что хотите, естественно, и Claude выбирает умные дефолты. Но понимание того, что возможно, помогает получать лучшие результаты.

## Как работает генерация

Когда вы просите Claude сгенерировать изображение:

1. **Вы описываете**, что хотите, на естественном языке
2. **Claude переводит** ваш запрос в параметры API
3. **Функция `generate()`** отправляет запрос к Gemini
4. **Gemini генерирует** изображение (10-15 секунд)
5. **Изображение сохраняется** в вашу папку `outputs/`
6. **Claude говорит вам**, где его найти

Вы никогда не касаетесь API напрямую. Claude обрабатывает всё.

## Функция `generate()`

Вся генерация изображений проходит через `image_gen.py`. Вот ключевые параметры:

| Параметр | Что контролирует | По умолчанию |
|-----------|------------------|---------|
| `prompt` | Ваше описание изображения | Обязательно |
| `reference_images` | Фото для использования как визуальный вход | Нет |
| `aspect_ratio` | Форма выходного изображения | 1:1 |
| `resolution` | Размер/качество вывода | 1K |

### Два способа работы

**Вариант 1: Позволить Claude решить**
```
Сгенерируй профессиональный headshot product manager
```
Claude выбирает разумные дефолты (1:1 для headshots, 1K для черновиков).

**Вариант 2: Указать, что хотите**
```
Сгенерируй профессиональный headshot, 16:9 соотношение сторон, 2K разрешение
```
Claude соблюдает ваши явные запросы.

Оба подхода работают отлично. Начните с Варианта 1, уточняйте при необходимости.

## Соотношения сторон

Соотношение сторон - это форма вашего изображения. Выбирайте на основе того, где вы его используете.

| Соотношение | Форма | Лучше всего для |
|-------|-------|----------|
| **1:1** | Квадрат | Аватары, Instagram посты, иконки |
| **16:9** | Широкий ландшафт | Презентации, YouTube миниатюры, героические изображения |
| **9:16** | Высокий портрет | Instagram/TikTok stories, обои телефона |
| **4:5** | Высокий прямоугольник | Instagram feed посты |
| **3:2** | Классическое фото | Традиционное фотографическое соотношение |
| **4:3** | Стандарт | Старые презентации, планшеты |
| **21:9** | Ультра-широкий | Кинематографичные, баннеры |

### Быстрая справка

- **Слайд презентации?** → 16:9
- **Пост в соцсетях?** → 1:1 или 4:5
- **Мокап телефона?** → 9:16
- **Героическое изображение сайта?** → 16:9 или 21:9
- **Аватар?** → 1:1

## Разрешение

Разрешение определяет размер и уровень детализации. Оно НЕ влияет на креативное качество - только на размеры в пикселях.

| Разрешение | Размеры | Время генерации | Лучше всего для |
|------------|------------|-----------------|----------|
| **1K** | 1024px | ~20 секунд | Черновики, итерация, исследование |
| **2K** | 2048px | ~30 секунд | Финальные выводы, презентации |
| **4K** | 4096px | ~45 секунд | Печать, большие дисплеи |

### Стратегия разрешения

**Используйте 1K во время итерации.** Быстрее, стоит столько же и позволяет исследовать быстрее.

**Используйте 2K для финальных версий.** Когда вы довольны творческим направлением, регенерируйте в более высоком разрешении.

**Используйте 4K только для печати.** Если вы не печатаете в большом масштабе, 4K избыточен.

## Итерация: Основной Workflow

Итерация - самая важная концепция в генерации изображений. Вместо надежды на правильность с первого раза, вы уточняете шаг за шагом.

### Почему итерация работает

Gemini - это "thinking model" - она поддерживает контекст через разговор. Когда вы говорите "сделай это синее", она знает, что означает "это" и что вы обсуждали ранее.

**Подход одним выстрелом (фрустрирующий):**
```
Сгенерировать идеальное изображение → Надеяться, что правильно → Начать заново, если нет
```

**Итеративный подход (эффективный):**
```
Сгенерировать первый черновик → "Добавь больше контраста" → "Переместить текст выше" → "Идеально"
```

### Как итерировать

После того как Claude генерирует изображение, просто запросите изменения:

- "Сделай фон темнее"
- "Добавь тонкую тень"
- "Измени текст на 'Launch Day'"
- "Сделай это более профессиональным"
- "Попробуй более тёплую цветовую палитру"

Claude продолжает сессию с Gemini, и ваши изменения основываются на предыдущем изображении.

### Когда начинать заново

Иногда итерация не правильный ход:

- **Крупное изменение направления** → Начать заново с `new_session()`
- **Полностью другой субъект** → Начать заново
- **Хотите исследовать альтернативы** → Генерировать варианты (покрыто в 3.1.3)

Скажите Claude "начать новую сессию" или "попробуем что-то совершенно другое", и она начнёт заново.

## Сессии объяснены

**Сессия** - это разговор с Gemini, который поддерживает контекст. Вот как это работает:

**В рамках сессии:**
- Gemini помнит предыдущие генерации
- Вы можете ссылаться на "изображение" или "это"
- Правки основываются на предыдущих версиях
- "Thought signatures" сохраняют рассуждения

**Между сессиями:**
- Свежий старт
- Нет памяти предыдущей работы
- Хорошо для новых проектов или направлений

### Управление сессией

Claude управляет сессиями автоматически, но вы можете их контролировать:

| Что хотите | Что сказать |
|---------------|-------------|
| Продолжить уточнение | Просто описать изменения |
| Начать заново | "Начать новую сессию" |
| Проверить статус | "Какая текущая сессия?" |

**Профессиональный совет:** Сессии работают лучше всего для линейного уточнения. Если хотите исследовать несколько направлений, используйте варианты (покрыто в 3.1.3).

## Практические примеры

### Пример 1: Графика презентации

**Вы:** "Создай героическое изображение для презентации об ИИ продуктивности"

**Claude генерирует** изображение 1:1 в 1K разрешении.

**Вы:** "Сделай 16:9 для моих слайдов"

**Claude регенерирует** с правильным соотношением сторон.

**Вы:** "Добавь текст 'AI for PMs'"

**Claude добавляет** текстовый оверлей.

**Вы:** "Это идеально, регенерируй в 2K"

**Claude производит** финальную высокоразрешающую версию.

### Пример 2: Быстрое исследование

**Вы:** "Сгенерируй портрет user persona - корпоративная атмосфера"

**Claude генерирует** первую версию.

**Вы:** "Попробуй более casual вид"

**Claude уточняет** стиль.

**Вы:** "На самом деле, начнём заново - попробуй иллюстрированный стиль вместо этого"

**Claude начинает новую сессию** и генерирует иллюстрированную версию.

## Лучшие практики

### Делать:
- **Начинать с 1K разрешения** для более быстрой итерации
- **Быть конкретным в изменениях** - "сделай небо более оранжевым" лучше, чем "улучши это"
- **Позволять Claude выбирать дефолты**, когда у вас нет сильных предпочтений
- **Строить инкрементально** - маленькие изменения более предсказуемы

### Не делать:
- **Не начинать с 4K** - вы потратите время на изображения, которые вы будете менять
- **Не делать несколько изменений сразу** - итерировать по одному за раз
- **Не быть расплывчатым** - "сделай лучше" не даёт Claude ничего для работы
- **Не отказываться от хороших изображений** - итерировать вместо начала заново

## Устранение неполадок

### Изменения не применяются

- Убедитесь, что вы конкретны в том, что менять
- Попробуйте переформулировать: "измени цвет фона на navy blue" вместо "другой фон"
- Сессия могла запутаться - начать заново

### Соотношение сторон выглядит неправильно

- Убедитесь, что вы запросили правильное соотношение (16:9 vs 9:16 - распространённая путаница)
- Некоторые композиции работают лучше в определённых соотношениях - Claude может предложить альтернативы

### Качество изображения кажется низким

- Проверьте разрешение - вы можете быть на 1K (что хорошо для черновиков)
- Для финальных выводов явно запросите 2K разрешение

### Генерация медленная

- 4K занимает ~45 секунд, что кажется медленным, но нормально
- Плохой интернет может добавить задержку
- Высокая нагрузка API может вызвать задержки

## Быстрая справочная карта

```
Соотношения сторон:
  1:1   → Квадрат (аватары, иконки)
  16:9  → Ландшафт (презентации)
  9:16  → Портрет (stories, мобильные)
  4:5   → Высокий (Instagram feed)

Разрешение:
  1K → Быстрые черновики
  2K → Финальные выводы
  4K → Только печать

Workflow:
  1. Сгенерировать на 1K
  2. Итерировать пока не доволен
  3. Регенерировать на 2K для финала
```

## Что дальше?

Вы понимаете механику. Теперь пора изучить искусство.

**Модуль 3.1.3** обучает Золотым правилам промптинга - как писать описания, которые получают потрясающие результаты. Вы также узнаете о референсных изображениях и генерации вариантов.

Интерактивный трек: Введите `/start-3-1-3`

## Ресурсы

- [Gemini Image Generation Documentation](https://ai.google.dev/gemini-api/docs/image-generation) - Параметры, соотношения сторон, опции разрешения
- [Gemini 3 Developer Guide](https://ai.google.dev/gemini-api/docs/gemini-3) - Thought signatures, мультитурные сессии

---

**О курсе**

Создано [Carl Vellotti](https://www.linkedin.com/in/carlvellotti/). Посмотрите [The Full Stack PM](https://fullstackpm.com/subscribe?utm_source=ccforpms&utm_medium=course&utm_campaign=nano-banana-basics) для большего PM builder контента.

**Исходный репозиторий:** [github.com/carlvellotti/claude-code-pm-course](https://github.com/carlvellotti/claude-code-pm-course)
